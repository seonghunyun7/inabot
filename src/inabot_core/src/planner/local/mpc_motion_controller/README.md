
// FMS와 로봇 간 경로 포인트 처리 시나리오
// 1. 경로 포인트를 한 점씩 받아 이동, 목표지점 10cm 이내 도착 시 다음 포인트 요청
// 2. 현재 MPC 알고리즘은 1점 단위 경로와 맞지 않아 보간법으로 4개 점 생성 필요
//    - 단, 너무 짧은 포인트 간격은 문제 발생 가능
// 3. 권장 보간 후 포인트 간격: 10cm ~ 20cm
//    - DD 타입 로봇 속도(0.3~0.5 m/s)와 연산량, 제어 부드러움 균형 고려
//    - 원래 1점 간격 40~80cm일 때 4개 점 보간 시 적당한 간격임
// 4. 운영 환경에 따라 간격 조절 가능하며, FMS와 협의해 최소 40cm 이상 유지 권장
// 5. 도킹 시는 짧은 움직임 필요하므로 MPC 대신 도킹 전용 컨트롤러 사용 고려



감지 거리 너무 짧으면 급정지 발생

    예: 로봇이 0.5 m/s로 달리는데, 장애물이 60 cm 앞에서 감지되면, 0.5 m/s → 0으로 떨어지기까지 1~2 MPC 주기밖에 안 됩니다.

    감속률 0.5 m/s² 적용해도 0.5 m/s ÷ 0.5 m/s² = 1 s 정도가 걸리지만, 실제 로봇 관성 때문에 충돌 위험이 존재.

좌우 범위 ±0.6 m

    로봇 폭이 0.4~0.5 m라면, ±0.6 m 범위는 조금 여유 있음, 하지만 좁은 통로에서 장애물 감지 신호가 자주 토글될 수 있음.

    신호가 빠르게 on/off 되면 MPC가 반복해서 감속/정지/가속을 반복할 수 있음.

즉시 감속 로직과 결합 시

    obstacle_stop_만 체크하고 바로 speed_ = speed_ - decel*dt_ 하면, 충돌 거리 계산이 반영되지 않음.

    장애물 거리와 속도에 따라 적절한 감속 곡선을 적용해야 안전.